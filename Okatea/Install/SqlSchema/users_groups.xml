<?xml version="1.0" encoding="UTF-8"?>

<database>

<!-- INSTALL -->

	<!-- core_users_groups -->
	<action id="core_users_groups" label="Create table %s" string="{{PREFIX}}core_users_groups">

		<test eq="neq" value="{{PREFIX}}core_users_groups" label="Table %s exists" type="wrn"
		string="{{PREFIX}}core_users_groups">SHOW TABLES LIKE '{{PREFIX}}core_users_groups'</test>

		CREATE TABLE `{{PREFIX}}core_users_groups` (
			`group_id` 			SERIAL,
			`perms` 			TEXT 					NULL,

			PRIMARY KEY (`group_id`)
		) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE utf8_general_ci ;
	</action>

	<!-- core_users_groups_locales -->
	<action id="core_users_groups_locales" label="Create table %s" string="{{PREFIX}}core_users_groups_locales">
		<test eq="neq" value="{{PREFIX}}core_users_groups_locales" label="Table %s exists" type="wrn"
		string="{{PREFIX}}core_users_groups_locales">SHOW TABLES LIKE '{{PREFIX}}core_users_groups_locales'</test>

		CREATE TABLE `{{PREFIX}}core_users_groups_locales` (
			`group_id` 			BIGINT(20) 		UNSIGNED	NOT NULL,
			`language` 			CHAR(5) 					NOT NULL,

			`title` 			VARCHAR(255) 				NOT NULL DEFAULT '',

			PRIMARY KEY (`group_id`,`language`)
		) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE utf8_general_ci ;
	</action>

	<!-- default core_users_groups -->
	<action id="firstusersgroups" label="Creation des premiers groupes utilisateurs" process="install">
		INSERT INTO `{{PREFIX}}core_users_groups`
			(`group_id`, `perms`)
		VALUES
			(1, NULL),
			(2, '["usage","configsite"]'),
			(3, NULL),
			(4, NULL)
		;
	</action>

	<action id="firstusersgroupslocales" label="Creation des locales des premiers groupes utilisateurs" process="install">
		INSERT INTO `{{PREFIX}}core_users_groups_locales`
			(`group_id`, `language`, `title`)
		VALUES
			(1, 'fr', 'Super-administrateur'),
			(1, 'en', 'Super-administrator'),
			(2, 'fr', 'Administrateur'),
			(2, 'en', 'Administrator'),
			(3, 'fr', 'Invit√©'),
			(3, 'en', 'Guest'),
			(4, 'fr', 'Membre'),
			(4, 'en', 'Member')
		;
	</action>


<!-- UPDATE -->

</database>
